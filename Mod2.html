<!DOCTYPE html>
<html lang="en">

<head>
  <title>Objects and Arrays</title>
</head>

<body>
  <h1>Objects and Arrays</h1>
  <p>Please load this file in VSCode and Chrome, and open the Console in Chrome Dev Tools.</p>
  <p>Work through the challenges found inside the script tag in this document,
    until the Console reports all tests passing.</p>

  <script>
    // In CHALLENGEs 1-9 you will flesh out some functions

    // To do this, translate each üß† set of instructions into a working function
    // ‚ùó Functions are scaffolded for you, but some of them are missing their parameters
    // ‚ùó Watch the Guided Project to learn proper debugging technique

    // üëâ CHALLENGE 1
    // üß† The function buildPeter builds an object of a certain shape and returns it.
    // üß† Example of usage:
    // buildPeter() // should return { firstName: "Peter", lastName: "Pan", age: 12 }
    function buildPeter() {
        return { firstName: "Peter", lastName: "Pan", age: 12 }
    }

    // üëâ CHALLENGE 2
    // üß† The function buildUser takes three arguments and uses them to build an object and return it.
    // üß† Example of usage:
    // buildUser("John", "Smith", 30) // should return { firstName: "John", lastName: "Smith", age: 30 }
    function buildUser(firstName, lastName, age) {
        let result = {}
        result.firstName = firstName
        result.lastName = lastName
        result.age = age
        return result
    }

    // üëâ CHALLENGE 3
    // üß† The function deletePrice takes an object as its argument and deletes its "price" property if it exists.
    // üß† If on the other hand there is no "price" property on the object, a "priceless" property with a value of true is added to it.
    // üß† After the modification of the object, it is returned.
    // üß† Note that the argument of the function is missing, you must write it.
    // üß† Examples of usage:
    // deletePrice({ item: "Tesla Model 3", price: 40000 }) // should return { item: "Tesla Model 3" }
    // deletePrice({ item: "Kobo Libra 2" }) // should return { item: "Kobo Libra 2", priceless: true }
    function deletePrice(obj) {
        if (obj.price !== undefined) {
            delete obj.price 
        } else {
            obj.priceless = true
        }
        return obj
    }

    // üëâ CHALLENGE 4
    // üß† The function evenList takes an array as its argument and returns true if the array has an even number of elements, false otherwise.
    // üß† Note that the argument of the function is missing, you must write it.
    // üß† Examples of usage:
    // evenList(['a']) // should return false
    // evenList(['a', 'b']) // should return true
    function evenList(arr) {
        let numOfElements = arr.length
        let isEven = numOfElements % 2 === 0
        if (isEven) {
            return true
        }
        return false
    }

    // üëâ CHALLENGE 5
    // üß† The function firstOrLast takes an array as the first argument, and a Boolean as the second.
    // üß† If the Boolean is true, the function returns the first element of the array, otherwise the last one.
    // üß† Examples of usage:
    // firstOrLast(['a', 'b'], true) // should return 'a'
    // firstOrLast(['a', 'b'], false) // should return 'b'
    function firstOrLast(arr, bool) {
        if (bool) {
            return arr[0]
        }
        return arr[arr.length - 1]
    }

    // üëâ CHALLENGE 6
    // üß† The function pushElement takes an array as the first argument, and any value we wish as the second.
    // üß† The function adds the given value as the last element of the array, and then returns the whole array.
    // üß† Examples of usage:
    // pushElement([], 1) // should return [1]
    // pushElement(['a', 'b'], 'c') // should return ['a', 'b', 'c']
    function pushElement(arr, val) {
        arr[arr.length] = val
        return arr
    }

    // üëâ CHALLENGE 7
    // üß† The function stripX takes a string as its argument.
    // üß† The function strips any occurrences of the letter "x" from the string and returns the resulting string.
    // üß† Examples of usage:
    // stripX("xenomorph") // should return "enomorph"
    // stripX("paradox") // should return "parado"
    // ‚ùó Important Hints:
    // üß† Inside the function, we should split the given string into an array of characters. Example: "foo".split("") yields¬†["f", "o", "o"]
    // üß† Do not attempt to manipulate the array of characters. Create an empty result array, and populate it by looping over the characters.
    // üß† At each iteration of the loop, if the current character is not "x", then add it to the end of the result array.
    // üß† You can merge the result array back into a string by using join. Example: ["f", "o", "o"].join("") yields¬†"foo"
    // üß† Do not forget to return your rejoined string!
    function stripX(str) {
        let result = []
        let splitStr = str.split('')
        for (let idx in splitStr) {
            let char = splitStr[idx]
            if (char !== 'x') {
                result[result.length] = char
            }
        }
        return result.join('')
    }

    // üëâ CHALLENGE 8
    // üß† The function stripChar takes a string as its first argument and a character as its second argument.
    // üß† The function strips any occurrences of the given character from the string and returns the resulting string.
    // üß† Examples of usage:
    // stripChar("xenomorph", "x") // should return "enomorph"
    // stripChar("paradox", "a") // should return "prdox"
    // ‚ùó Important Notes:
    // üß† Try to solve this problem without looking at how you solved the previous one.
    // üß† If you need to look, do not copy & paste code. Take a peek and then work from memory!
    function stripChar(str, char) {
        let splitStr = str.split('')
        let result = []
        for (let idx in splitStr) {
            let character = splitStr[idx]
            if (character !== char) {
                result[result.length] = character
            }
        }
        return result.join('')
    }

    // üëâ CHALLENGE 9
    // üß† The function getProps takes an object as its argument.
    // üß† The function returns an array containing the property names of the object.
    // üß† However, if the properties "age" or "married" come up, do not include them in the returned array.
    // üß† Avoid using the delete operator in your implementation. We don't wish to alter the object!
    // üß† Examples of usage:
    // getProps({ lastName: "Smith", age: 35 }) // should return ["lastName"]
    // getProps({ firstName: "Jane", married: false }) // should return ["firstName"]
    // getProps({ name: "Bamby", favFood: "flowers" }) // should return ["name", "favFood"]
    function getProps(obj) {
        let result = []
        for (let key in obj) {
            if (key !== 'age' && key !== 'married' ) {
                result[result.length] = key
            }
        }
        return result
    }

    // üß™ TESTS, do not work below this line
    // üß™ TESTS, do not work below this line
    // üß™ TESTS, do not work below this line
    runTests('CHALLENGE 1 - buildPeter', buildPeter, [
      [[], { firstName: "Peter", lastName: "Pan", age: 12 }],
    ])
    runTests('CHALLENGE 2 - buildUser', buildUser, [
      [["John", "Smith", 30], { firstName: "John", lastName: "Smith", age: 30 }],
      [["Jane", "Doe", 25], { firstName: "Jane", lastName: "Doe", age: 25 }],
    ])
    runTests('CHALLENGE 3 - deletePrice', deletePrice, [
      [[{ item: "Tesla Model 3", price: 40000 }], { item: "Tesla Model 3" }],
      [[{ item: "Friends and family", price: 0 }], { item: "Friends and family" }],
      [[{ item: "Kobo Libra 2" }], { item: "Kobo Libra 2", priceless: true }],
    ])
    runTests('CHALLENGE 4 - evenList', evenList, [
      [[[]], true],
      [[['a']], false],
      [[['a', 'b']], true],
    ])
    runTests('CHALLENGE 5 - firstOrLast', firstOrLast, [
      [[['a', 'b'], true], 'a'],
      [[['a', 'b', 'c'], false], 'c'],
    ])
    runTests('CHALLENGE 6 - pushElement', pushElement, [
      [[[], 1], [1]],
      [[['a', 'b', 'c'], 'd'], ['a', 'b', 'c', 'd']],
    ])
    runTests('CHALLENGE 7 - stripX', stripX, [
      [['extracorporeal'], 'etracorporeal'],
      [['counterexample'], 'countereample'],
      [['xoxo'], 'oo'],
      [['x'], ''],
    ])
    runTests('CHALLENGE 8 - stripChar', stripChar, [
      [['extracorporeal', 'x'], 'etracorporeal'],
      [['counterexample', 'e'], 'countrxampl'],
      [['xoxo', 'o'], 'xx'],
      [['x', 'x'], ''],
    ])
    runTests('CHALLENGE 9 - getProps', getProps, [
      [[{ lastName: "Smith", age: 35 }], ["lastName"]],
      [[{ firstName: "Jane", married: false }], ["firstName"]],
      [[{ firstName: "Jane", married: true, age: 65 }], ["firstName"]],
      [[{ name: "Bamby", favFood: "flowers" }], ["name", "favFood"]],
    ])
    function runTests(testName, func, tests) {
      let results = []
      tests.forEach(test => {
        const argsList = test[0]
        const expected = JSON.stringify(test[1])
        const actual = JSON.stringify(func.apply(null, JSON.parse(JSON.stringify(argsList))))
        results.push([argsList, expected, actual])
      })
      console.log('\n' + testName)
      if (results.every(result => result[1] === result[2])) console.log('\t‚úÖ All tests pass')
      else results.forEach((result, idx) => {
        if (result[1] === result[2]) console.log(`\t‚úÖ Test ${idx + 1} passes`)
        else console.log(`\t‚ùå Test ${idx + 1} fails: ${func.name}(${result[0]
          .map(JSON.stringify)}) should return ${result[1]} but returns ${result[2]}`)
      })
    }
  </script>
</body>

</html>